rsync 快速 多功能 远程（本地） 文件拷贝 系统

语法

本地：
	rsync [OPTION...] <源数据> [目标路径]

从远程 shell 使用：
	拉取：
		rsync [OPTION...] [<用户名>@]<远程主机>:<源数据>... [目标路径]
	推送：
		rsync [OPTION...] <源数据>... [<用户>@]<远程主机>:<目标路径>

从 rsync 服务使用：
	拉取：
		rsync [OPTION...] [<用户>@]<远程主机>::<源数据>... [目标路径]
		rsync [OPTION...] rsync://[<用户>@]<远程主机>[:<端口>]/<源数据>... [目标路径]
	推送：
		rsync [OPTION...] <源数据>... [<用户>@]<远程主机>::<目标路径>
		rsync [OPTION...] <源数据> rsync://[<用户>@]<远程主机>[:<端口>]/<目标路径>


大体说明

rsync 支持 本地 与 本地 对拷、本地 与 远程 对拷，但不支持 远程 与 远程 对拷

rysnc 支持两种方式连接 远程系统：
	一种是用过连接 远程 shell（remote-shell） 作为通道（比如 ssh 或 rsh）
	或直接通过 TCP 连接至 rsync 服务

	当使用 单个冒号 : 区分 主机 和 路径时，表示使用 远程 shell
	当使用 双冒号 :: 区分 主机 和 路径时，表示使用 rsync 服务

如果仅指定 源路径 而不指定其他的内容，则罗列 源路径 下的文件，输出形式和 ls -l 类似

rsync 将 本地 视为 client，将 远程 视为 server
rsync daemon 一定是一个 server


安装

rsync 必须在 本地 及 远程 机器上安装才可以正常使用

默认情况下， rsync 通过 ssh 作为通信用的 远程 shell
这个设置可以通过选项 -e 或 环境变量 RSYNC_RSH 指定


用法

保持原有修改时间不变

	rsync -t *.c foo:src/

以 存档 的方式备份数据，并在传输之前进行压缩处理，以减少传输量

	rsync -avz foo:src/bar/ /data/tmp

若 源数据 以 / 作为结尾，则拷贝 文件夹的内容 至新目录
若 源数据 以 文件夹名 作为结尾，则在新目录下创建 文件夹，再拷贝 文件夹的内容
以下两种写法是等价的

	rsync -av /src/foo /dest
	rsync -av /src/foo/ /dest/foo

当使用 rsync daemon 时，daemon 会定义一些模块（module），
模块的配置文件 会指定 该模块可以使用的顶层目录路径 等等信息
此时， rsync 标识路径就写为

rsync -av <主机名>::<模块名>/<相对模块路径> <目标路径>

用以下命令罗列主机可使用的所有模块

rsync <主机名>::
